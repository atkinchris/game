!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e){e.exports=[[0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=[],n=0;n<e.length;n+=1)for(var r=e[n],o=0;o<r.length;o+=1){var u=r[o];t.push({x:o,y:n,blocked:1===u})}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=t.ZONE_SIZE=14,u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldX=t,this.worldY=n,this.cells={};for(var r=0;r<o;r+=1)for(var u=0;u<o;u+=1)this.addEntity({blocked:!1,x:this.worldX*o+u,y:this.worldY*o+r})}return r(e,[{key:"getBounds",value:function(){return{x:this.worldX*o,y:this.worldY*o,height:o,width:o}}},{key:"addEntity",value:function(t){var n=e.toLocalHash(t);return this.cells[n]=t,t}},{key:"getEntities",value:function(){return Object.values(this.cells)}}],[{key:"toLocalHash",value:function(e){var t=e.x;return e.y%o*o+t%o}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=(r=u)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zones=[]}return o(e,[{key:"addZone",value:function(e,t){var n=new i.default(e,t);return this.zones.push(n),n}},{key:"addEntity",value:function(e){var t=Math.floor(e.x/u.ZONE_SIZE),n=Math.floor(e.y/u.ZONE_SIZE),r=this.zones.find(function(e){return e.worldX===t&&e.worldY===n});return r||(console.log("Zone at {"+t+", "+n+"} did not exist; creating..."),r=this.addZone(t,n)),r.addEntity(e)}},{key:"getZones",value:function(){return this.zones}}]),e}();t.default=a},function(e,t,n){"use strict";var r=i(n(3)),o=i(n(1)),u=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var a=document.getElementById("canvas"),l=a.getContext("2d"),c=new r.default;(0,o.default)(u.default).forEach(function(e){return c.addEntity(e)});!function(){l.clearRect(0,0,a.width,a.height),l.translate(10,10);for(var e=c.getZones(),t=[],n=0;n<e.length;n+=1)t=t.concat(e[n].getEntities());for(var r=0;r<t.length;r+=1){var o=t[r];l.fillStyle=o.blocked?"#333":"#eee",l.fillRect(16*o.x,16*o.y,16,16)}for(var u=0;u<e.length;u+=1){var i=e[u].getBounds(),f=i.x,s=i.y,d=i.width,h=i.height;l.strokeStyle="blue",l.lineWidth="5",l.rect(16*f,16*s,16*d,16*h),l.stroke()}}()}]);
//# sourceMappingURL=main.121eba31.js.map